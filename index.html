// App.js
import React, { useEffect } from 'react';
import Layout from './Layout'; // IMPORTING YOUR EXTERNAL FILE

const App = () => {
  // GSAP Animation Loader & Logic
  // (We removed the bubble creation logic because your Layout.js handles that now)
  useEffect(() => {
    const loadScripts = () => {
      if (window.gsap && window.ScrollTrigger) {
        initAnimations();
        return;
      }

      const gsapScript = document.createElement('script');
      gsapScript.src = "https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js";
      gsapScript.onload = () => {
        const stScript = document.createElement('script');
        stScript.src = "https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js";
        stScript.onload = () => {
          window.gsap.registerPlugin(window.ScrollTrigger);
          initAnimations();
        };
        document.body.appendChild(stScript);
      };
      document.body.appendChild(gsapScript);
    };

    const initAnimations = () => {
      const gsap = window.gsap;
      const ScrollTrigger = window.ScrollTrigger;

      // Initial Hero Animations
      gsap.from("#hero-title", {
        duration: 1.5,
        y: 50,
        opacity: 0,
        ease: "power4.out"
      });

      gsap.from("#hero-subtitle", {
        duration: 1.5,
        y: 30,
        opacity: 0,
        delay: 0.3,
        ease: "power4.out"
      });

      // Scroll Effects
      gsap.to("#main-object", {
        scrollTrigger: {
          trigger: "body",
          start: "top top",
          end: "50% top",
          scrub: 1.2,
        },
        scale: 3,
        opacity: 0,
        rotate: 5,
        ease: "none"
      });

      gsap.to("#hero-glass-box", {
        scrollTrigger: {
          trigger: "body",
          start: "top top",
          end: "40% top",
          scrub: true,
        },
        opacity: 0,
        ease: "power2.inOut"
      });

      gsap.to("#hero-title, #hero-subtitle", {
        scrollTrigger: {
          trigger: "body",
          start: "top top",
          end: "40% top",
          scrub: true
        },
        y: -100,
        opacity: 0
      });

      gsap.from("#feature-1, #feature-2", {
        scrollTrigger: {
          trigger: "#feature-1",
          start: "top 85%",
        },
        y: 80,
        opacity: 0,
        duration: 1,
        stagger: 0.2,
        ease: "back.out(1.2)"
      });

      gsap.from("#impact-text", {
        scrollTrigger: {
          trigger: "#impact-text",
          start: "top 85%",
        },
        y: 40,
        opacity: 0,
        duration: 1.2,
        ease: "power2.out"
      });
    };

    loadScripts();
  }, []);

  return (
    <Layout>
      {/* Hero Section */}
      <section className="relative h-[90vh] flex flex-col items-center justify-center text-center px-4 overflow-hidden">
        
        <div className="z-10 mt-[-10vh]">
          <h1 className="text-5xl md:text-8xl font-extrabold mb-4 tracking-tight text-gray-900" id="hero-title">
            Agua Potable <br /><span className="text-blue-600">Filtrada del Aire.</span>
          </h1>
          <p className="text-lg md:text-xl text-gray-500 max-w-2xl mx-auto font-medium" id="hero-subtitle">
            Transformamos la humedad de la atmósfera en agua potable pura y mineralizada, para llevar vida a cada rincón del planeta.
          </p>
        </div>

        <div id="hero-glass-box" className="absolute inset-0 w-full h-full bg-white/85 backdrop-blur-md pointer-events-none z-[5]"></div>

        <div className="product_technology-container absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl flex justify-center items-center pointer-events-none z-0" id="main-object">
          <img 
            src="https://raw.githubusercontent.com/cypher-the-meyer/themeyer.eu/main/GEN-M-PRO.png" 
            alt="The Meyer GEN-M Pro" 
            id="main-object-img" 
            className="w-[300px] md:w-[500px] object-contain drop-shadow-[0_20px_50px_rgba(0,0,0,0.15)]"
          />
        </div>
        
        <div className="absolute bottom-10 animate-bounce text-blue-400 z-10">
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
          </svg>
        </div>
      </section>

      {/* Product Details */}
      <section className="relative z-20 min-h-screen py-32 px-8 flex flex-col items-center justify-center bg-gradient-to-b from-white to-[#f8faff]">
        <div className="grid md:grid-cols-2 gap-16 max-w-6xl w-full">
          <div className="glass p-10 rounded-3xl shadow-xl shadow-blue-500/5" id="feature-1">
            <div className="w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center mb-6 text-blue-600">
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1a1 1 0 112 0v1a1 1 0 11-2 0zM13.536 14.95a1 1 0 010-1.414l.707-.707a1 1 0 011.414 1.414l-.707.707a1 1 0 01-1.414 0zM6.464 14.95l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414z"></path>
              </svg>
            </div>
            <h3 className="text-3xl font-bold mb-4 text-gray-900">Tecnologia Patentada</h3>
            <p className="text-gray-500 leading-relaxed">
              GENius es la tecnología de Generación de Agua Atmosférica (AWG) más eficiente energéticamente del mundo, produciendo agua potable a partir de la humedad del aire.
            </p>
          </div>
          <div className="glass p-10 rounded-3xl shadow-xl shadow-blue-500/5" id="feature-2">
            <div className="w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center mb-6 text-blue-600">
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z" clipRule="evenodd"></path>
              </svg>
            </div>
            <h3 className="text-3xl font-bold mb-4 text-gray-900">Soluciones Escalables</h3>
            <p className="text-gray-500 leading-relaxed">
              Ofrecemos infraestructura de vanguardia diseñada para ser implementada en entornos industriales de alta demanda con máxima eficiencia.
            </p>
          </div>
        </div>
        
        <div className="mt-32 text-center max-w-4xl" id="impact-text">
          <h2 className="text-4xl md:text-6xl font-extrabold mb-8 text-gray-900">Pure. Safe. Limitless.</h2>
          <p className="text-xl text-gray-500">
            No piping required. No infrastructure needed. Just pure air converted into the highest quality drinking water at the point of use.
          </p>
        </div>
      </section>

      {/* Visual Sections */}
      <section className="relative h-[60vh] md:h-[80vh] w-full overflow-hidden z-20">
        <img 
          src="https://raw.githubusercontent.com/cypher-the-meyer/themeyer.eu/main/Watergen.png" 
          alt="The Meyer Atmospheric Visual Hero 1" 
          className="w-full h-full object-cover grayscale-[0.2] hover:grayscale-0 transition-all duration-1000"
        />
      </section>

      {/* Articles */}
      <section className="py-24 px-8 bg-white relative z-20" id="articles-section">
        <div className="max-w-6xl mx-auto">
          <div className="flex items-center space-x-4 mb-12">
            <div className="h-px bg-gray-200 flex-grow"></div>
            <h2 className="text-sm font-bold tracking-[0.3em] uppercase text-blue-600">Articulos y Reportajes</h2>
            <div className="h-px bg-gray-200 flex-grow"></div>
          </div>
          
          <div className="flex flex-wrap items-center justify-center gap-8 md:gap-16 opacity-40 grayscale hover:grayscale-0 transition-all duration-700">
            {/* Placeholder Logos */}
            <span className="text-2xl font-black text-gray-900 italic">Forbes</span>
            <span className="text-2xl font-black text-gray-900">WSJ</span>
            <span className="text-2xl font-black text-gray-900 uppercase">CNBC</span>
            <span className="text-2xl font-black text-red-600">TIME</span>
          </div>

          <div className="mt-16 grid md:grid-cols-3 gap-8">
            {[
              { cat: 'Sustentabilidad', title: 'El futuro del agua en zonas áridas', desc: 'Cómo la tecnología AWG está cambiando el paradigma de la escasez hídrica global...' },
              { cat: 'Innovación', title: 'Eficiencia Energética en GENius', desc: 'Análisis técnico sobre la optimización del consumo eléctrico en la generación atmosférica...' },
              { cat: 'Reportaje', title: 'Infraestructura del Mañana', desc: 'The Meyer lidera el despliegue de soluciones hídricas sin necesidad de tuberías...' },
            ].map((article, index) => (
              <div key={index} className="p-8 border border-gray-100 rounded-2xl hover:shadow-lg transition-shadow cursor-pointer group">
                <span className="text-xs font-bold text-blue-500 block mb-4 uppercase tracking-wider">{article.cat}</span>
                <h4 className="text-xl font-bold mb-3 group-hover:text-blue-600 transition-colors">{article.title}</h4>
                <p className="text-gray-500 text-sm">{article.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Footer */}
      {/* I added the footer here because your Layout.js does not contain a footer */}
      <footer className="py-12 border-t border-gray-100 text-center text-gray-400 text-sm font-semibold tracking-widest bg-white relative z-20 px-4">
        &copy; 2025 THE MEYER EU. ALL RIGHTS RESERVED. <br className="md:hidden" /> Abriendo un horizonte a través del estándar global de la inovacion e integridad.
      </footer>

    </Layout>
  );
};

export default App;
